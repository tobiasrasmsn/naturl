generator client {
    provider = "prisma-client-js"
    output   = "../lib/generated/prisma"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model urls {
    id           Int       @id @default(autoincrement())
    original_url String
    short_code   String    @unique
    created_at   DateTime? @default(now()) @db.Timestamptz(6)
    is_custom    Boolean?  @default(false)
}

model ideas {
    id         Int          @id @default(autoincrement())
    content    String
    author_id  String
    created_at DateTime?    @default(now()) @db.Timestamptz(6)
    votes      Int          @default(0)
    idea_votes idea_votes[]
}

model idea_votes {
    id        Int   @id @default(autoincrement())
    idea_id   Int
    author_id String
    vote      Int // 1 for up, -1 for down

    idea ideas @relation(fields: [idea_id], references: [id], onDelete: Cascade)

    @@unique([idea_id, author_id])
}
